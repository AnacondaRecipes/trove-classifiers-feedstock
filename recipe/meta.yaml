{% set name = "trove-classifiers" %}
{% set version = "2025.5.9.12" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/pypa/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: e2073313aeed13ca9c305ad6cacc2bed0c42a1170ef843f67e1e27c3d98c39c1

build:
  skip: true  # [py<38]
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0
  entry_points:
    - trove-classifiers = trove_classifiers.__main__:cli

requirements:
  host:
    - python
    - calver
    - pip
    - setuptools
    - wheel
  run:
    - python

{% set tests_to_skip = "" %}
# hp, ht, pid, tid = _winapi.CreateProcess(executable, args,
#                          # no special security
#                          None, None,
#                          int(not close_fds),
#                          creationflags,
#                          env,
#                          cwd,
#                          startupinfo)
#                          FileNotFoundError: [WinError 2] The system cannot find the file specified
{% set tests_to_skip = tests_to_skip + '-k "not (test_entry_point or test_module_run_is_entry_point)"' %}  # [win]

test:
  source_files:
    - tests
  imports:
    - trove_classifiers
  commands:
    - pip check
    - trove-classifiers --help
    - pytest {{ tests_to_skip }} tests
  requires:
    - pip
    - pytest

about:
  home: https://github.com/pypa/trove-classifiers
  summary: Canonical source for classifiers on PyPI (pypi.org).
  description: |
    Canonical source for classifiers on PyPI.
    Classifiers categorize projects per PEP 301.
    Use this package to validate classifiers in packages for PyPI upload or download.
  license: Apache-2.0
  license_family: Apache
  license_file: LICENSE
  dev_url: https://github.com/pypa/trove-classifiers
  doc_url: https://pypi.org/project/trove-classifiers

extra:
  recipe-maintainers:
    - xylar